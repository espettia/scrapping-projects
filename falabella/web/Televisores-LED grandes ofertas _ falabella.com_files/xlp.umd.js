(function(_){typeof define=="function"&&define.amd?define(_):_()})(function(){"use strict";var _=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Fe=typeof _=="object"&&_&&_.Object===Object&&_,k=Fe,Ke=k,Ue=typeof self=="object"&&self&&self.Object===Object&&self,Xe=Ke||Ue||Function("return this")(),h=Xe,ze=h,Be=ze.Symbol,M=Be,Y=M,Z=Object.prototype,He=Z.hasOwnProperty,qe=Z.toString,m=Y?Y.toStringTag:void 0;function Ve(e){var t=He.call(e,m),r=e[m];try{e[m]=void 0;var a=!0}catch{}var n=qe.call(e);return a&&(t?e[m]=r:delete e[m]),n}var ke=Ve,Ye=Object.prototype,Ze=Ye.toString;function Je(e){return Ze.call(e)}var We=Je,J=M,Qe=ke,et=We,tt="[object Null]",rt="[object Undefined]",W=J?J.toStringTag:void 0;function at(e){return e==null?e===void 0?rt:tt:W&&W in Object(e)?Qe(e):et(e)}var T=at;function nt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var g=nt,it=T,ot=g,st="[object AsyncFunction]",ct="[object Function]",lt="[object GeneratorFunction]",ut="[object Proxy]";function ft(e){if(!ot(e))return!1;var t=it(e);return t==ct||t==lt||t==st||t==ut}var j=ft,dt=h,pt=dt["__core-js_shared__"],vt=pt,N=vt,Q=function(){var e=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function gt(e){return!!Q&&Q in e}var _t=gt,ht=Function.prototype,yt=ht.toString;function $t(e){if(e!=null){try{return yt.call(e)}catch{}try{return e+""}catch{}}return""}var bt=$t,At=j,wt=_t,mt=g,Tt=bt,Ot=/[\\^$.*+?()[\]{}|]/g,Ct=/^\[object .+?Constructor\]$/,St=Function.prototype,Pt=Object.prototype,It=St.toString,Dt=Pt.hasOwnProperty,Lt=RegExp("^"+It.call(Dt).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Et(e){if(!mt(e)||wt(e))return!1;var t=At(e)?Lt:Ct;return t.test(Tt(e))}var Mt=Et;function jt(e,t){return e==null?void 0:e[t]}var Nt=jt,xt=Mt,Rt=Nt;function Gt(e,t){var r=Rt(e,t);return xt(r)?r:void 0}var x=Gt,Ft=x,Kt=function(){try{var e=Ft(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ee=Kt,te=ee;function Ut(e,t,r){t=="__proto__"&&te?te(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var R=Ut;function Xt(e,t){return e===t||e!==e&&t!==t}var C=Xt,zt=R,Bt=C,Ht=Object.prototype,qt=Ht.hasOwnProperty;function Vt(e,t,r){var a=e[t];(!(qt.call(e,t)&&Bt(a,r))||r===void 0&&!(t in e))&&zt(e,t,r)}var re=Vt,kt=Array.isArray,O=kt;function Yt(e){return e!=null&&typeof e=="object"}var y=Yt,Zt=T,Jt=y,Wt="[object Symbol]";function Qt(e){return typeof e=="symbol"||Jt(e)&&Zt(e)==Wt}var G=Qt,er=O,tr=G,rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ar=/^\w*$/;function nr(e,t){if(er(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||tr(e)?!0:ar.test(e)||!rr.test(e)||t!=null&&e in Object(t)}var ir=nr,or=x,sr=or(Object,"create"),S=sr,ae=S;function cr(){this.__data__=ae?ae(null):{},this.size=0}var lr=cr;function ur(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var fr=ur,dr=S,pr="__lodash_hash_undefined__",vr=Object.prototype,gr=vr.hasOwnProperty;function _r(e){var t=this.__data__;if(dr){var r=t[e];return r===pr?void 0:r}return gr.call(t,e)?t[e]:void 0}var hr=_r,yr=S,$r=Object.prototype,br=$r.hasOwnProperty;function Ar(e){var t=this.__data__;return yr?t[e]!==void 0:br.call(t,e)}var wr=Ar,mr=S,Tr="__lodash_hash_undefined__";function Or(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mr&&t===void 0?Tr:t,this}var Cr=Or,Sr=lr,Pr=fr,Ir=hr,Dr=wr,Lr=Cr;function $(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}$.prototype.clear=Sr,$.prototype.delete=Pr,$.prototype.get=Ir,$.prototype.has=Dr,$.prototype.set=Lr;var Er=$;function Mr(){this.__data__=[],this.size=0}var jr=Mr,Nr=C;function xr(e,t){for(var r=e.length;r--;)if(Nr(e[r][0],t))return r;return-1}var P=xr,Rr=P,Gr=Array.prototype,Fr=Gr.splice;function Kr(e){var t=this.__data__,r=Rr(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():Fr.call(t,r,1),--this.size,!0}var Ur=Kr,Xr=P;function zr(e){var t=this.__data__,r=Xr(t,e);return r<0?void 0:t[r][1]}var Br=zr,Hr=P;function qr(e){return Hr(this.__data__,e)>-1}var Vr=qr,kr=P;function Yr(e,t){var r=this.__data__,a=kr(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var Zr=Yr,Jr=jr,Wr=Ur,Qr=Br,ea=Vr,ta=Zr;function b(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}b.prototype.clear=Jr,b.prototype.delete=Wr,b.prototype.get=Qr,b.prototype.has=ea,b.prototype.set=ta;var I=b,ra=x,aa=h,na=ra(aa,"Map"),ne=na,ie=Er,ia=I,oa=ne;function sa(){this.size=0,this.__data__={hash:new ie,map:new(oa||ia),string:new ie}}var ca=sa;function la(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ua=la,fa=ua;function da(e,t){var r=e.__data__;return fa(t)?r[typeof t=="string"?"string":"hash"]:r.map}var D=da,pa=D;function va(e){var t=pa(this,e).delete(e);return this.size-=t?1:0,t}var ga=va,_a=D;function ha(e){return _a(this,e).get(e)}var ya=ha,$a=D;function ba(e){return $a(this,e).has(e)}var Aa=ba,wa=D;function ma(e,t){var r=wa(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var Ta=ma,Oa=ca,Ca=ga,Sa=ya,Pa=Aa,Ia=Ta;function A(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}A.prototype.clear=Oa,A.prototype.delete=Ca,A.prototype.get=Sa,A.prototype.has=Pa,A.prototype.set=Ia;var oe=A,se=oe,Da="Expected a function";function F(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Da);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],i=r.cache;if(i.has(n))return i.get(n);var s=e.apply(this,a);return r.cache=i.set(n,s)||i,s};return r.cache=new(F.Cache||se),r}F.Cache=se;var La=F,Ea=La,Ma=500;function ja(e){var t=Ea(e,function(a){return r.size===Ma&&r.clear(),a}),r=t.cache;return t}var Na=ja,xa=Na,Ra=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/\\(\\)?/g,Fa=xa(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ra,function(r,a,n,i){t.push(n?i.replace(Ga,"$1"):a||r)}),t}),Ka=Fa;function Ua(e,t){for(var r=-1,a=e==null?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}var Xa=Ua,ce=M,za=Xa,Ba=O,Ha=G,qa=1/0,le=ce?ce.prototype:void 0,ue=le?le.toString:void 0;function fe(e){if(typeof e=="string")return e;if(Ba(e))return za(e,fe)+"";if(Ha(e))return ue?ue.call(e):"";var t=e+"";return t=="0"&&1/e==-qa?"-0":t}var Va=fe,ka=Va;function Ya(e){return e==null?"":ka(e)}var Za=Ya,Ja=O,Wa=ir,Qa=Ka,en=Za;function tn(e,t){return Ja(e)?e:Wa(e,t)?[e]:Qa(en(e))}var K=tn,rn=9007199254740991,an=/^(?:0|[1-9]\d*)$/;function nn(e,t){var r=typeof e;return t=t==null?rn:t,!!t&&(r=="number"||r!="symbol"&&an.test(e))&&e>-1&&e%1==0&&e<t}var U=nn,on=G,sn=1/0;function cn(e){if(typeof e=="string"||on(e))return e;var t=e+"";return t=="0"&&1/e==-sn?"-0":t}var X=cn,ln=re,un=K,fn=U,de=g,dn=X;function pn(e,t,r,a){if(!de(e))return e;t=un(t,e);for(var n=-1,i=t.length,s=i-1,o=e;o!=null&&++n<i;){var c=dn(t[n]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(n!=s){var d=o[c];l=a?a(d,c,o):void 0,l===void 0&&(l=de(d)?d:fn(t[n+1])?[]:{})}ln(o,c,l),o=o[c]}return e}var vn=pn,gn=vn;function _n(e,t,r){return e==null?e:gn(e,t,r)}var hn=_n,yn=K,$n=X;function bn(e,t){t=yn(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[$n(t[r++])];return r&&r==a?e:void 0}var pe=bn,An=pe;function wn(e,t,r){var a=e==null?void 0:An(e,t);return a===void 0?r:a}var mn=wn,Tn=I;function On(){this.__data__=new Tn,this.size=0}var Cn=On;function Sn(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Pn=Sn;function In(e){return this.__data__.get(e)}var Dn=In;function Ln(e){return this.__data__.has(e)}var En=Ln,Mn=I,jn=ne,Nn=oe,xn=200;function Rn(e,t){var r=this.__data__;if(r instanceof Mn){var a=r.__data__;if(!jn||a.length<xn-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Nn(a)}return r.set(e,t),this.size=r.size,this}var Gn=Rn,Fn=I,Kn=Cn,Un=Pn,Xn=Dn,zn=En,Bn=Gn;function w(e){var t=this.__data__=new Fn(e);this.size=t.size}w.prototype.clear=Kn,w.prototype.delete=Un,w.prototype.get=Xn,w.prototype.has=zn,w.prototype.set=Bn;var Hn=w,qn=R,Vn=C;function kn(e,t,r){(r!==void 0&&!Vn(e[t],r)||r===void 0&&!(t in e))&&qn(e,t,r)}var ve=kn;function Yn(e){return function(t,r,a){for(var n=-1,i=Object(t),s=a(t),o=s.length;o--;){var c=s[e?o:++n];if(r(i[c],c,i)===!1)break}return t}}var Zn=Yn,Jn=Zn,Wn=Jn(),Qn=Wn,z={exports:{}};(function(e,t){var r=h,a=t&&!t.nodeType&&t,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,s=i?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function c(l,d){if(d)return l.slice();var p=l.length,v=o?o(p):new l.constructor(p);return l.copy(v),v}e.exports=c})(z,z.exports);var ei=h,ti=ei.Uint8Array,ri=ti,ge=ri;function ai(e){var t=new e.constructor(e.byteLength);return new ge(t).set(new ge(e)),t}var ni=ai,ii=ni;function oi(e,t){var r=t?ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var si=oi;function ci(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var li=ci,ui=g,_e=Object.create,fi=function(){function e(){}return function(t){if(!ui(t))return{};if(_e)return _e(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),di=fi;function pi(e,t){return function(r){return e(t(r))}}var vi=pi,gi=vi,_i=gi(Object.getPrototypeOf,Object),he=_i,hi=Object.prototype;function yi(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||hi;return e===r}var ye=yi,$i=di,bi=he,Ai=ye;function wi(e){return typeof e.constructor=="function"&&!Ai(e)?$i(bi(e)):{}}var mi=wi,Ti=T,Oi=y,Ci="[object Arguments]";function Si(e){return Oi(e)&&Ti(e)==Ci}var Pi=Si,$e=Pi,Ii=y,be=Object.prototype,Di=be.hasOwnProperty,Li=be.propertyIsEnumerable,Ei=$e(function(){return arguments}())?$e:function(e){return Ii(e)&&Di.call(e,"callee")&&!Li.call(e,"callee")},Ae=Ei,Mi=9007199254740991;function ji(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mi}var we=ji,Ni=j,xi=we;function Ri(e){return e!=null&&xi(e.length)&&!Ni(e)}var B=Ri,Gi=B,Fi=y;function Ki(e){return Fi(e)&&Gi(e)}var Ui=Ki,L={exports:{}};function Xi(){return!1}var zi=Xi;(function(e,t){var r=h,a=zi,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||a;e.exports=l})(L,L.exports);var Bi=T,Hi=he,qi=y,Vi="[object Object]",ki=Function.prototype,Yi=Object.prototype,me=ki.toString,Zi=Yi.hasOwnProperty,Ji=me.call(Object);function Wi(e){if(!qi(e)||Bi(e)!=Vi)return!1;var t=Hi(e);if(t===null)return!0;var r=Zi.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&me.call(r)==Ji}var Qi=Wi,eo=T,to=we,ro=y,ao="[object Arguments]",no="[object Array]",io="[object Boolean]",oo="[object Date]",so="[object Error]",co="[object Function]",lo="[object Map]",uo="[object Number]",fo="[object Object]",po="[object RegExp]",vo="[object Set]",go="[object String]",_o="[object WeakMap]",ho="[object ArrayBuffer]",yo="[object DataView]",$o="[object Float32Array]",bo="[object Float64Array]",Ao="[object Int8Array]",wo="[object Int16Array]",mo="[object Int32Array]",To="[object Uint8Array]",Oo="[object Uint8ClampedArray]",Co="[object Uint16Array]",So="[object Uint32Array]",f={};f[$o]=f[bo]=f[Ao]=f[wo]=f[mo]=f[To]=f[Oo]=f[Co]=f[So]=!0,f[ao]=f[no]=f[ho]=f[io]=f[yo]=f[oo]=f[so]=f[co]=f[lo]=f[uo]=f[fo]=f[po]=f[vo]=f[go]=f[_o]=!1;function Po(e){return ro(e)&&to(e.length)&&!!f[eo(e)]}var Io=Po;function Do(e){return function(t){return e(t)}}var Lo=Do,H={exports:{}};(function(e,t){var r=k,a=t&&!t.nodeType&&t,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,s=i&&r.process,o=function(){try{var c=n&&n.require&&n.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(H,H.exports);var Eo=Io,Mo=Lo,Te=H.exports,Oe=Te&&Te.isTypedArray,jo=Oe?Mo(Oe):Eo,Ce=jo;function No(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Se=No,xo=re,Ro=R;function Go(e,t,r,a){var n=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var o=t[i],c=a?a(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),n?Ro(r,o,c):xo(r,o,c)}return r}var Fo=Go;function Ko(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var Uo=Ko,Xo=Uo,zo=Ae,Bo=O,Ho=L.exports,qo=U,Vo=Ce,ko=Object.prototype,Yo=ko.hasOwnProperty;function Zo(e,t){var r=Bo(e),a=!r&&zo(e),n=!r&&!a&&Ho(e),i=!r&&!a&&!n&&Vo(e),s=r||a||n||i,o=s?Xo(e.length,String):[],c=o.length;for(var l in e)(t||Yo.call(e,l))&&!(s&&(l=="length"||n&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||qo(l,c)))&&o.push(l);return o}var Jo=Zo;function Wo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Qo=Wo,es=g,ts=ye,rs=Qo,as=Object.prototype,ns=as.hasOwnProperty;function is(e){if(!es(e))return rs(e);var t=ts(e),r=[];for(var a in e)a=="constructor"&&(t||!ns.call(e,a))||r.push(a);return r}var os=is,ss=Jo,cs=os,ls=B;function us(e){return ls(e)?ss(e,!0):cs(e)}var Pe=us,fs=Fo,ds=Pe;function ps(e){return fs(e,ds(e))}var vs=ps,Ie=ve,gs=z.exports,_s=si,hs=li,ys=mi,De=Ae,Le=O,$s=Ui,bs=L.exports,As=j,ws=g,ms=Qi,Ts=Ce,Ee=Se,Os=vs;function Cs(e,t,r,a,n,i,s){var o=Ee(e,r),c=Ee(t,r),l=s.get(c);if(l){Ie(e,r,l);return}var d=i?i(o,c,r+"",e,t,s):void 0,p=d===void 0;if(p){var v=Le(c),V=!v&&bs(c),Ge=!v&&!V&&Ts(c);d=c,v||V||Ge?Le(o)?d=o:$s(o)?d=hs(o):V?(p=!1,d=gs(c,!0)):Ge?(p=!1,d=_s(c,!0)):d=[]:ms(c)||De(c)?(d=o,De(o)?d=Os(o):(!ws(o)||As(o))&&(d=ys(c))):p=!1}p&&(s.set(c,d),n(d,c,a,i,s),s.delete(c)),Ie(e,r,d)}var Ss=Cs,Ps=Hn,Is=ve,Ds=Qn,Ls=Ss,Es=g,Ms=Pe,js=Se;function Me(e,t,r,a,n){e!==t&&Ds(t,function(i,s){if(n||(n=new Ps),Es(i))Ls(e,t,s,r,Me,a,n);else{var o=a?a(js(e,s),i,s+"",e,t,n):void 0;o===void 0&&(o=i),Is(e,s,o)}},Ms)}var Ns=Me;function xs(e){return e}var je=xs;function Rs(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Gs=Rs,Fs=Gs,Ne=Math.max;function Ks(e,t,r){return t=Ne(t===void 0?e.length-1:t,0),function(){for(var a=arguments,n=-1,i=Ne(a.length-t,0),s=Array(i);++n<i;)s[n]=a[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=a[n];return o[t]=r(s),Fs(e,this,o)}}var Us=Ks;function Xs(e){return function(){return e}}var zs=Xs,Bs=zs,xe=ee,Hs=je,qs=xe?function(e,t){return xe(e,"toString",{configurable:!0,enumerable:!1,value:Bs(t),writable:!0})}:Hs,Vs=qs,ks=800,Ys=16,Zs=Date.now;function Js(e){var t=0,r=0;return function(){var a=Zs(),n=Ys-(a-r);if(r=a,n>0){if(++t>=ks)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ws=Js,Qs=Vs,ec=Ws,tc=ec(Qs),rc=tc,ac=je,nc=Us,ic=rc;function oc(e,t){return ic(nc(e,t,ac),e+"")}var sc=oc,cc=C,lc=B,uc=U,fc=g;function dc(e,t,r){if(!fc(r))return!1;var a=typeof t;return(a=="number"?lc(r)&&uc(t,r.length):a=="string"&&t in r)?cc(r[t],e):!1}var pc=dc,vc=sc,gc=pc;function _c(e){return vc(function(t,r){var a=-1,n=r.length,i=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(n--,i):void 0,s&&gc(r[0],r[1],s)&&(i=n<3?void 0:i,n=1),t=Object(t);++a<n;){var o=r[a];o&&e(t,o,a,i)}return t})}var hc=_c,yc=Ns,$c=hc,bc=$c(function(e,t,r){yc(e,t,r)}),Ac=bc;function wc(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var mc=wc;function Tc(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+t];return i}var Oc=Tc,Cc=pe,Sc=Oc;function Pc(e,t){return t.length<2?e:Cc(e,Sc(t,0,-1))}var Ic=Pc,Dc=K,Lc=mc,Ec=Ic,Mc=X;function jc(e,t){return t=Dc(t,e),e=Ec(e,t),e==null||delete e[Mc(Lc(t))]}var Nc=jc,xc=Nc;function Rc(e,t){return e==null?!0:xc(e,t)}var Gc=Rc;function Fc(e){return btoa(unescape(encodeURIComponent(e)))}function Kc(e){const t=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;try{return t.test(e)?decodeURIComponent(escape(window.atob(e.replace(/"/g,"")))):!1}catch{return!1}}const u={get:mn,set:hn,merge:Ac,unset:Gc};function Uc(){const e=document.querySelectorAll("[data-facet-type]"),t=new Set;e.forEach(r=>{const a=r.getAttribute("data-facet-type");t.add(a)}),u.set(window,"digitalData.tag.XLP.Facets_Shown",Array.from(t).filter(Boolean).join(",")),window.addEventListener("DDXLPFacetFilters",r=>{try{const a=u.get(r,"detail",[]),n=[];a.forEach(o=>{const c=u.get(o,"values",[]);o.name==="Precio"&&o.type==="MULTI_SELECT_WITH_RANGE"&&n.push(u.get(o,"meta[0].facetType","")),c.forEach(l=>{if(l.facetType){n.push(l.facetType);return}const d=u.get(l,"filters",[]),p=u.get(d.find(v=>/_category_paths/.test(v.name)),"name","");n.push(p)})});const i=new Set(n.flat()),s=Array.from(i);u.set(window,"digitalData.tag.XLP.Facets_Shown",s.filter(Boolean).join(","))}catch(a){console.error("Error in Digita Data Event (DDXLPFacetFilters): ",a)}})}const q={ANALYTICS_INFO_DEFAULT_RESPONSE:{analyticsInfo:{page:{},login:{}}},CATALYST_PAGE_MAPPING:{noResult:"slp",search:"slp",category:"plp",collection:"collection",product:"pdp",seller:"plp seller",brand:"plp brand",page:"page","":"home"},DIGITAL_DATA_STORAGE_NAME:"analyticsInfo",DIGITAL_DATA_COOKIE_NAME:"ANALYTICS_INFO",GEOFINDER_COOKIE_NAME:"GEOFINDER_INFO",OTHER_SUBDOMAINS:{cl:{fmedia:"falabella"}},PAGE_TYPE_MAPPING:{noResult:"noSearchResult",search:"search",category:"product list page",collection:"product list page",product:"product detail page",seller:"product list page",brand:"product list page",page:"page","":"home"},SEARCH_TERM:"Ntt",SHOULD_CALL_V2:"isAnalyticsInfoV2Enabled",SID_MOBILE:"APPMOBILE",STORE_NAMES_REGEX:new RegExp(/(tienda|sodimac|linio|tottus|homecenter)/,"g"),STORE_SUBDOMAINS:{cl:{sodimac:"sodimac",tottus:"tottus",linio:"linio",tienda:"falabella"},pe:{sodimac:"sodimac",tottus:"tottus",linio:"linio",tienda:"falabella"},co:{sodimac:"sodimac",homecenter:"homecenter",linio:"linio",tienda:"falabella"}}},Xc=".falabella.com",Re={ANALYTICS_INFO:{type:"object",encoded:!1},DYNAMIC_DATA_COOKIE:{type:"string",encoded:!1},CATALYST_DATA_COOKIE:{type:"string",encoded:!1},NAVIGATION_TAGS:{type:"object",encoded:!0}};function zc(e){const t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""}function Bc(){const e=window.location.hostname.split(".");return e[0]="",e.join(".")||Xc}function Hc({name:e,value:t,expiryDays:r=1,domain:a,path:n="/"}){let i=t,s="";const o=`;domain=${a||Bc()}`,c=`;path=${n}`,l=Re[e];if(l&&(l.type==="object"&&(i=JSON.stringify(i)),i=l.encoded?Fc(i):i),r){const p=new Date,v=24*60*60*1e3;p.setTime(p.getTime()+r*v),s=`; expires=${p.toGMTString()}`}const d=`${e}=${i}${o}${c}${s}`;return document.cookie=d,d}function qc(e,t){if(!t)return!1;const{encoded:r,type:a}=Re[e],n=r?Kc(t):t;if(a==="object")try{return JSON.parse(n)}catch{return!1}return n}function Vc(){const e=qc(q.DIGITAL_DATA_COOKIE_NAME,zc(q.DIGITAL_DATA_COOKIE_NAME));return e&&typeof e=="object"?e:{}}function E(e={}){const t=Vc();Hc({name:q.DIGITAL_DATA_COOKIE_NAME,value:u.merge(t,e)})}function kc(e){const t=e||window.location.href;if(document.getElementsByClassName("error-page").length>0)return"error";const r=new URL(t).pathname.split("/");return r.length>2?r[2]:""}function Yc(){let e="";["search","category","collection"].includes(kc())?e='[data-gsccategory][data-sponsored="false"]':e="[data-gsccategory]";const t=document.querySelector(e);u.set(window,"digitalData.tag.XLP_Clasification",u.get(t,"dataset.gsccategory",""))}function Zc(){window.addEventListener("DDXLPPodClick",e=>{var t;(t=e==null?void 0:e.detail)!=null&&t.payload&&(e.detail.setDDXLPOnly?u.set(window,"digitalData.tag.XLP.pod_click",e.detail.payload):E({tag:{XLP:{pod_click:e.detail.payload}}}))})}const Jc=()=>{const e=document.querySelector("[pod-layout]");u.set(window,"digitalData.tag.XLP_products_view",u.get(e,"attributes.pod-layout.value",""))};function Wc(){const e=document.querySelector("[related-keywords-impression]"),t=u.get(e,"attributes.related-keywords-impression.value","");t&&u.set(window,"digitalData.tag.XLP.Related_Keyword_impression",t),window.addEventListener("DDXLPRelatedKeywordImpressions",r=>{var a;(a=r==null?void 0:r.detail)!=null&&a.payload&&u.set(window,"digitalData.tag.XLP.Related_Keyword_impression",r.detail.payload)})}function Qc(){window.addEventListener("DDXLPRelatedKeywordClick",e=>{var t;(t=e==null?void 0:e.detail)!=null&&t.payload&&(u.set(window,"digitalData.tag.XLP.Related_Keyword",e.detail.payload),E({tag:{XLP:{Related_Keyword:e.detail.payload}}}))})}function el(){window.addEventListener("DDXLPRelatedKeywordDelete",e=>{var r,a;const t=u.get(window,"digitalData.tag.XLP.Related_Keyword","");if(((r=e==null?void 0:e.detail)==null?void 0:r.payload)&&t){const n=t.substring(t.split("|",1).join("|").length+2,t.split("|",2).join("|").length-1);((a=e==null?void 0:e.detail)==null?void 0:a.payload)!==n&&u.unset(window,"digitalData.tag.XLP.Related_Keyword")}})}function tl(){Wc(),Qc(),el()}function rl(){window.addEventListener("DDXLPMyListsClick",e=>{var t;(t=e==null?void 0:e.detail)!=null&&t.payload&&(u.set(window,"digitalData.tag.XLP.GoToMisListas",e.detail.payload),E({tag:{XLP:{GoToMisListas:e.detail.payload}}}))})}function al(){window.addEventListener("DDXLPMyListsMeasurement",e=>{var t;(t=e==null?void 0:e.detail)!=null&&t.payload&&u.set(window,"digitalData.tag.XLP.ML",e.detail.payload)})}function nl(){al(),rl()}function il(){const e=document.getElementById("testId-searchResults-products");e&&e.addEventListener("click",()=>{u.set(window,"digitalData.page.previousUrl",window.location.href),E({page:{previousUrl:window.location.href}})})}const ol=()=>{window.addEventListener("DDXLPA2CAddToCart",e=>{if(e.detail!=="none"){const{SKU:t,defaultParentCategory:r,merchantCategory:a,price:n,quantity:i}=e.detail;u.set(window,"digitalData.tag.XLP.A2C_XLP",{SKU:t,defaultParentCategory:r,merchantCategory:a,event84:i,event85:n})}}),window.addEventListener("DDXLPA2CRemoveFromCart",e=>{if(e.detail!=="none"){const{SKU:t,defaultParentCategory:r,merchantCategory:a,price:n,quantity:i}=e.detail;u.set(window,"digitalData.tag.XLP.A2C_XLP",{SKU:t,defaultParentCategory:r,merchantCategory:a,event80:i,event81:n})}})};function sl(){const e={"digitalData.tag.xlp":{},"digitalData.tag.XLP.A2C_XLP":{},"digitalData.page.previousUrl":""};Object.keys(e).forEach(t=>{u.get(window,t)||u.set(window,t,e[t])})}function cl(){u.set(window,"digitalData.digitalDataManager.isXlpActive",!0),sl(),Yc(),Jc(),il(),Uc(),tl(),Zc(),nl(),ol()}cl()});
